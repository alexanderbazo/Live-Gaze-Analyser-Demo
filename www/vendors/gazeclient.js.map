{"version":3,"file":"gazeclient.js","sources":["../lib/utils/Observable.js","../lib/com/Events.js","../lib/data/GazeData.js","../lib/com/WebSocketClient.js","../lib/index.js"],"sourcesContent":["class Observable {\r\n\r\n  constructor() {\r\n    this.listeners = {};\r\n  }\r\n\r\n  addEventListener(type, callback) {\r\n    if (this.listeners[type] === undefined) {\r\n      this.listeners[type] = [];\r\n    }\r\n    this.listeners[type].push(callback);\r\n  }\r\n\r\n  notifyAll(event) {\r\n    let listeners = this.listeners[event.type];\r\n    if (listeners) {\r\n      for (let i = 0; i < listeners.length; i++) {\r\n        listeners[i](event);\r\n      }\r\n    }\r\n  }\r\n\r\n}\r\n\r\nexport default Observable;","class Event {\r\n\r\n  constructor(type, data) {\r\n    this.type = type;\r\n    this.data = data;\r\n  }\r\n\r\n}\r\n\r\nclass DataEvent extends Event {\r\n  constructor(data) {\r\n    super(\"dataavailable\", data);\r\n  }\r\n}\r\n\r\nclass ConnectionOpenedEvent extends Event {\r\n  constructor() {\r\n    super(\"connectionopened\");\r\n  }\r\n}\r\n\r\nclass ConnectionClosedEvent extends Event {\r\n  constructor() {\r\n    super(\"connectionclosed\");\r\n  }\r\n}\r\n\r\nclass ConnectionErrorEvent extends Event {\r\n  constructor() {\r\n    super(\"erroroccurred\");\r\n  }\r\n}\r\n\r\nexport {DataEvent, ConnectionOpenedEvent, ConnectionClosedEvent, ConnectionErrorEvent};","const DATA_SEPERATOR = \";\";\r\n\r\nclass GazeData {\r\n  constructor(leftEyeX, leftEyeY, rightEyeX, rightEyeY, trackerTimeStamp,\r\n    systemTimeStamp) {\r\n    this.leftEyeX = leftEyeX;\r\n    this.leftEyeY = leftEyeY;\r\n    this.rightEyeX = rightEyeX;\r\n    this.rightEyeY = rightEyeY;\r\n    this.trackerTimeStamp = trackerTimeStamp;\r\n    this.systemTimeStamp = systemTimeStamp;\r\n  }\r\n\r\n  static fromDataString(dataString) {\r\n    let dataValues = dataString.split(DATA_SEPERATOR);\r\n    return new GazeData(parseFloat(dataValues[0]), parseFloat(dataValues[1]), parseFloat(dataValues[2]),\r\n      parseFloat(dataValues[3]), parseInt(dataValues[4]), parseInt(dataValues[5]));\r\n  }\r\n}\r\n\r\nexport default GazeData;","import Observable from \"../utils/Observable.js\";\r\nimport { ConnectionOpenedEvent, ConnectionClosedEvent, ConnectionErrorEvent,\r\n  DataEvent } from \"./Events.js\";\r\nimport GazeData from \"../data/GazeData.js\";\r\n\r\nclass WebSocketClient extends Observable {\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  connect(url) {\r\n    this.ws = new WebSocket(url);\r\n    this.ws.onopen = onOpen.bind(this);\r\n    this.ws.onclose = onClose.bind(this);\r\n    this.ws.onerror = onError.bind(this);\r\n    this.ws.onmessage = onMessage.bind(this);\r\n  }\r\n\r\n}\r\n\r\nfunction onOpen() {\r\n  let connectionEvent = new ConnectionOpenedEvent();\r\n  this.notifyAll(connectionEvent);\r\n}\r\n\r\nfunction onClose() {\r\n  let connectionEvent = new ConnectionClosedEvent();\r\n  this.notifyAll(connectionEvent);\r\n}\r\n\r\nfunction onError() {\r\n  let connectionEvent = new ConnectionErrorEvent();\r\n  this.notifyAll(connectionEvent);\r\n}\r\n\r\nfunction onMessage(event) {\r\n  let data = GazeData.fromDataString(event.data),\r\n    dataEvent = new DataEvent(data);\r\n  this.notifyAll(dataEvent);\r\n}\r\n\r\nexport default WebSocketClient;","import Observable from \"./utils/Observable.js\";\r\nimport WebSocketClient from \"./com/WebSocketClient.js\";\r\n\r\nclass GazeClient extends Observable {\r\n\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  connect(url) {\r\n    this.url = url;\r\n    this.client = new WebSocketClient();\r\n    this.client.addEventListener(\"connectionopened\", this.onConnected.bind(this));\r\n    this.client.addEventListener(\"connectionclosed\", this.onDisconnected.bind(this));\r\n    this.client.addEventListener(\"erroroccurred\", this.onDisconnected.bind(this));\r\n    this.client.addEventListener(\"dataavailable\", this.onDataAvailable\r\n      .bind(this));\r\n    this.client.connect(url);\r\n  }\r\n\r\n  onConnected(event) {\r\n    this.notifyAll(event);\r\n  }\r\n\r\n  onDisconnected(event) {\r\n    this.notifyAll(event);\r\n  }\r\n\r\n  onError(event) {\r\n    this.notifyAll(event);\r\n  }\r\n\r\n  onDataAvailable(event) {\r\n    this.notifyAll(event);\r\n  }\r\n\r\n}\r\n\r\nwindow.GazeClient = GazeClient;"],"names":[],"mappings":";;;;EAAA,MAAM,UAAU,CAAC;;EAEjB,EAAE,WAAW,GAAG;EAChB,IAAI,IAAI,CAAC,SAAS,GAAG,EAAE,CAAC;EACxB,GAAG;;EAEH,EAAE,gBAAgB,CAAC,IAAI,EAAE,QAAQ,EAAE;EACnC,IAAI,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,KAAK,SAAS,EAAE;EAC5C,MAAM,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;EAChC,KAAK;EACL,IAAI,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;EACxC,GAAG;;EAEH,EAAE,SAAS,CAAC,KAAK,EAAE;EACnB,IAAI,IAAI,SAAS,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,IAAI,CAAC,CAAC;EAC/C,IAAI,IAAI,SAAS,EAAE;EACnB,MAAM,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,SAAS,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;EACjD,QAAQ,SAAS,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC;EAC5B,OAAO;EACP,KAAK;EACL,GAAG;;EAEH,CAAC;;ECtBD,MAAM,KAAK,CAAC;;EAEZ,EAAE,WAAW,CAAC,IAAI,EAAE,IAAI,EAAE;EAC1B,IAAI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;EACrB,IAAI,IAAI,CAAC,IAAI,GAAG,IAAI,CAAC;EACrB,GAAG;;EAEH,CAAC;;EAED,MAAM,SAAS,SAAS,KAAK,CAAC;EAC9B,EAAE,WAAW,CAAC,IAAI,EAAE;EACpB,IAAI,KAAK,CAAC,eAAe,EAAE,IAAI,CAAC,CAAC;EACjC,GAAG;EACH,CAAC;;EAED,MAAM,qBAAqB,SAAS,KAAK,CAAC;EAC1C,EAAE,WAAW,GAAG;EAChB,IAAI,KAAK,CAAC,kBAAkB,CAAC,CAAC;EAC9B,GAAG;EACH,CAAC;;EAED,MAAM,qBAAqB,SAAS,KAAK,CAAC;EAC1C,EAAE,WAAW,GAAG;EAChB,IAAI,KAAK,CAAC,kBAAkB,CAAC,CAAC;EAC9B,GAAG;EACH,CAAC;;EAED,MAAM,oBAAoB,SAAS,KAAK,CAAC;EACzC,EAAE,WAAW,GAAG;EAChB,IAAI,KAAK,CAAC,eAAe,CAAC,CAAC;EAC3B,GAAG;EACH,CAAC;;EC/BD,MAAM,cAAc,GAAG,GAAG,CAAC;;EAE3B,MAAM,QAAQ,CAAC;EACf,EAAE,WAAW,CAAC,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE,SAAS,EAAE,gBAAgB;EACxE,IAAI,eAAe,EAAE;EACrB,IAAI,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;EAC7B,IAAI,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC;EAC7B,IAAI,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;EAC/B,IAAI,IAAI,CAAC,SAAS,GAAG,SAAS,CAAC;EAC/B,IAAI,IAAI,CAAC,gBAAgB,GAAG,gBAAgB,CAAC;EAC7C,IAAI,IAAI,CAAC,eAAe,GAAG,eAAe,CAAC;EAC3C,GAAG;;EAEH,EAAE,OAAO,cAAc,CAAC,UAAU,EAAE;EACpC,IAAI,IAAI,UAAU,GAAG,UAAU,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;EACtD,IAAI,OAAO,IAAI,QAAQ,CAAC,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;EACvG,MAAM,UAAU,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACnF,GAAG;EACH,CAAC;;ECbD,MAAM,eAAe,SAAS,UAAU,CAAC;;EAEzC,EAAE,WAAW,GAAG;EAChB,IAAI,KAAK,EAAE,CAAC;EACZ,GAAG;;EAEH,EAAE,OAAO,CAAC,GAAG,EAAE;EACf,IAAI,IAAI,CAAC,EAAE,GAAG,IAAI,SAAS,CAAC,GAAG,CAAC,CAAC;EACjC,IAAI,IAAI,CAAC,EAAE,CAAC,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACvC,IAAI,IAAI,CAAC,EAAE,CAAC,OAAO,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACzC,IAAI,IAAI,CAAC,EAAE,CAAC,OAAO,GAAG,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EACzC,IAAI,IAAI,CAAC,EAAE,CAAC,SAAS,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;EAC7C,GAAG;;EAEH,CAAC;;EAED,SAAS,MAAM,GAAG;EAClB,EAAE,IAAI,eAAe,GAAG,IAAI,qBAAqB,EAAE,CAAC;EACpD,EAAE,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC;EAClC,CAAC;;EAED,SAAS,OAAO,GAAG;EACnB,EAAE,IAAI,eAAe,GAAG,IAAI,qBAAqB,EAAE,CAAC;EACpD,EAAE,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC;EAClC,CAAC;;EAED,SAAS,OAAO,GAAG;EACnB,EAAE,IAAI,eAAe,GAAG,IAAI,oBAAoB,EAAE,CAAC;EACnD,EAAE,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC;EAClC,CAAC;;EAED,SAAS,SAAS,CAAC,KAAK,EAAE;EAC1B,EAAE,IAAI,IAAI,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,IAAI,CAAC;EAChD,IAAI,SAAS,GAAG,IAAI,SAAS,CAAC,IAAI,CAAC,CAAC;EACpC,EAAE,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;EAC5B,CAAC;;ECrCD,MAAM,UAAU,SAAS,UAAU,CAAC;;EAEpC,EAAE,WAAW,GAAG;EAChB,IAAI,KAAK,EAAE,CAAC;EACZ,GAAG;;EAEH,EAAE,OAAO,CAAC,GAAG,EAAE;EACf,IAAI,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;EACnB,IAAI,IAAI,CAAC,MAAM,GAAG,IAAI,eAAe,EAAE,CAAC;EACxC,IAAI,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;EAClF,IAAI,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;EACrF,IAAI,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,eAAe,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;EAClF,IAAI,IAAI,CAAC,MAAM,CAAC,gBAAgB,CAAC,eAAe,EAAE,IAAI,CAAC,eAAe;EACtE,OAAO,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;EACnB,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;EAC7B,GAAG;;EAEH,EAAE,WAAW,CAAC,KAAK,EAAE;EACrB,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;EAC1B,GAAG;;EAEH,EAAE,cAAc,CAAC,KAAK,EAAE;EACxB,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;EAC1B,GAAG;;EAEH,EAAE,OAAO,CAAC,KAAK,EAAE;EACjB,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;EAC1B,GAAG;;EAEH,EAAE,eAAe,CAAC,KAAK,EAAE;EACzB,IAAI,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;EAC1B,GAAG;;EAEH,CAAC;;EAED,MAAM,CAAC,UAAU,GAAG,UAAU;;;;"}